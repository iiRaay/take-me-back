{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ray/Documents/projects/timeline-app/components/PhotoLibrary.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useMemo, useRef } from \"react\";\nimport {\n  Box,\n  Grid,\n  Card,\n  CardMedia,\n  CardContent,\n  Typography,\n  CircularProgress,\n  Alert,\n  Chip,\n} from \"@mui/material\";\nimport { LocationOn } from \"@mui/icons-material\";\n\ninterface Photo {\n  filename: string;\n  path: string;\n  url: string;\n  metadata?: {\n    hasLocation: boolean;\n    latitude?: number;\n    longitude?: number;\n    dateTime?: string;\n  };\n}\n\ninterface PhotoLocation {\n  id: string;\n  lat: number;\n  lng: number;\n  filename: string;\n  url: string;\n  dateTime?: string;\n}\n\ninterface PhotoLibraryProps {\n  onPhotosWithLocationChange?: (locations: PhotoLocation[]) => void;\n  onPhotosWithDatesChange?: (photos: PhotoLocation[]) => void;\n  onPhotoClick?: (photo: PhotoLocation) => void;\n}\n\nexport default function PhotoLibrary({\n  onPhotosWithLocationChange,\n  onPhotosWithDatesChange,\n  onPhotoClick,\n}: PhotoLibraryProps) {\n  const [photos, setPhotos] = useState<Photo[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    loadPhotos();\n  }, []);\n\n  const photosWithLocation = useMemo(() => {\n    return photos\n      .filter((p) => p.metadata?.hasLocation)\n      .map((p) => ({\n        id: p.filename,\n        lat: p.metadata!.latitude!,\n        lng: p.metadata!.longitude!,\n        filename: p.filename,\n        url: p.url,\n        dateTime: p.metadata?.dateTime,\n      }));\n  }, [photos]);\n\n  const photosWithDates = useMemo(() => {\n    return photos\n      .filter((p) => p.metadata?.dateTime)\n      .map((p) => ({\n        id: p.filename,\n        lat: p.metadata?.latitude ?? 0,\n        lng: p.metadata?.longitude ?? 0,\n        filename: p.filename,\n        url: p.url,\n        dateTime: p.metadata!.dateTime!,\n      }));\n  }, [photos]);\n\n  const locationCallbackRef = useRef(onPhotosWithLocationChange);\n  const datesCallbackRef = useRef(onPhotosWithDatesChange);\n  const prevLocationsRef = useRef<string>(\"\");\n  const prevDatesRef = useRef<string>(\"\");\n\n  useEffect(() => {\n    locationCallbackRef.current = onPhotosWithLocationChange;\n    datesCallbackRef.current = onPhotosWithDatesChange;\n  }, [onPhotosWithLocationChange, onPhotosWithDatesChange]);\n\n  useEffect(() => {\n    if (locationCallbackRef.current) {\n      const currentIds = JSON.stringify(\n        photosWithLocation.map((p) => p.id).sort()\n      );\n      if (currentIds !== prevLocationsRef.current) {\n        prevLocationsRef.current = currentIds;\n        locationCallbackRef.current(photosWithLocation);\n      }\n    }\n  }, [photosWithLocation]);\n\n  useEffect(() => {\n    if (datesCallbackRef.current) {\n      const currentIds = JSON.stringify(\n        photosWithDates.map((p) => p.id).sort()\n      );\n      if (currentIds !== prevDatesRef.current) {\n        prevDatesRef.current = currentIds;\n        datesCallbackRef.current(photosWithDates);\n      }\n    }\n  }, [photosWithDates]);\n\n  const loadPhotos = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const photosResponse = await fetch(\"/api/photos\");\n      const { photos: photoList } = await photosResponse.json();\n\n      const photosWithMetadata = await Promise.all(\n        photoList.map(async (photo: Photo) => {\n          try {\n            const metadataResponse = await fetch(\"/api/photos/metadata\", {\n              method: \"POST\",\n              headers: { \"Content-Type\": \"application/json\" },\n              body: JSON.stringify({ filename: photo.filename }),\n            });\n\n            const metadata = await metadataResponse.json();\n\n            // Flatten metadata and ensure dateTime is string\n            const dateTime = metadata?.metadata?.dateTime\n              ? new Date(metadata.metadata.dateTime).toISOString()\n              : undefined;\n\n            return {\n              ...photo,\n              metadata: {\n                hasLocation: metadata.hasLocation,\n                latitude: metadata.latitude,\n                longitude: metadata.longitude,\n                dateTime,\n              },\n            };\n          } catch (err) {\n            console.error(\n              `Error fetching metadata for ${photo.filename}:`,\n              err\n            );\n            return { ...photo, metadata: { hasLocation: false } };\n          }\n        })\n      );\n\n      setPhotos(photosWithMetadata);\n    } catch (err) {\n      console.error(\"Error loading photos:\", err);\n      setError(\"Failed to load photos. Make sure the photos folder exists.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading)\n    return (\n      <Box\n        display=\"flex\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        minHeight={200}\n      >\n        <CircularProgress />\n      </Box>\n    );\n  if (error) return <Alert severity=\"warning\">{error}</Alert>;\n  if (photos.length === 0)\n    return <Alert severity=\"info\">No photos found.</Alert>;\n\n  const photosWithLocationCount = photos.filter(\n    (p) => p.metadata?.hasLocation\n  ).length;\n\n  return (\n    <Box>\n      <Box\n        display=\"flex\"\n        justifyContent=\"space-between\"\n        alignItems=\"center\"\n        mb={2}\n      >\n        <Typography variant=\"h6\">Photo Library ({photos.length})</Typography>\n        <Chip\n          label={`${photosWithLocationCount} with location data`}\n          color={photosWithLocationCount > 0 ? \"primary\" : \"default\"}\n          icon={<LocationOn />}\n        />\n      </Box>\n      <Grid container spacing={2}>\n        {photos.map((p) => (\n          <Grid item xs={12} sm={6} md={4} lg={3} key={p.filename}>\n            <Card\n              sx={{\n                cursor: \"pointer\",\n                transition: \"transform 0.2s\",\n                \"&:hover\": { transform: \"scale(1.02)\" },\n              }}\n              onClick={() =>\n                p.metadata?.hasLocation &&\n                onPhotoClick?.({\n                  id: p.filename,\n                  lat: p.metadata.latitude!,\n                  lng: p.metadata.longitude!,\n                  filename: p.filename,\n                  url: p.url,\n                  dateTime: p.metadata.dateTime,\n                })\n              }\n            >\n              <CardMedia\n                component=\"img\"\n                height=\"200\"\n                image={p.url}\n                alt={p.filename}\n                sx={{ objectFit: \"cover\" }}\n              />\n              <CardContent>\n                <Typography variant=\"body2\" noWrap>\n                  {p.filename}\n                </Typography>\n                {p.metadata?.hasLocation && (\n                  <Chip\n                    size=\"small\"\n                    label=\"üìç GPS\"\n                    color=\"primary\"\n                    sx={{ mt: 1 }}\n                  />\n                )}\n                {p.metadata?.dateTime && (\n                  <Typography\n                    variant=\"caption\"\n                    color=\"text.secondary\"\n                    display=\"block\"\n                    mt={1}\n                  >\n                    {new Date(p.metadata.dateTime).toLocaleString()}\n                  </Typography>\n                )}\n              </CardContent>\n            </Card>\n          </Grid>\n        ))}\n      </Grid>\n    </Box>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAdA;;;;;AA2Ce,SAAS,aAAa,EACnC,0BAA0B,EAC1B,uBAAuB,EACvB,YAAY,EACM;IAClB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAU,EAAE;IAChD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,qBAAqB,IAAA,gNAAO,EAAC;QACjC,OAAO,OACJ,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,EAAE,aAC1B,GAAG,CAAC,CAAC,IAAM,CAAC;gBACX,IAAI,EAAE,QAAQ;gBACd,KAAK,EAAE,QAAQ,CAAE,QAAQ;gBACzB,KAAK,EAAE,QAAQ,CAAE,SAAS;gBAC1B,UAAU,EAAE,QAAQ;gBACpB,KAAK,EAAE,GAAG;gBACV,UAAU,EAAE,QAAQ,EAAE;YACxB,CAAC;IACL,GAAG;QAAC;KAAO;IAEX,MAAM,kBAAkB,IAAA,gNAAO,EAAC;QAC9B,OAAO,OACJ,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,EAAE,UAC1B,GAAG,CAAC,CAAC,IAAM,CAAC;gBACX,IAAI,EAAE,QAAQ;gBACd,KAAK,EAAE,QAAQ,EAAE,YAAY;gBAC7B,KAAK,EAAE,QAAQ,EAAE,aAAa;gBAC9B,UAAU,EAAE,QAAQ;gBACpB,KAAK,EAAE,GAAG;gBACV,UAAU,EAAE,QAAQ,CAAE,QAAQ;YAChC,CAAC;IACL,GAAG;QAAC;KAAO;IAEX,MAAM,sBAAsB,IAAA,+MAAM,EAAC;IACnC,MAAM,mBAAmB,IAAA,+MAAM,EAAC;IAChC,MAAM,mBAAmB,IAAA,+MAAM,EAAS;IACxC,MAAM,eAAe,IAAA,+MAAM,EAAS;IAEpC,IAAA,kNAAS,EAAC;QACR,oBAAoB,OAAO,GAAG;QAC9B,iBAAiB,OAAO,GAAG;IAC7B,GAAG;QAAC;QAA4B;KAAwB;IAExD,IAAA,kNAAS,EAAC;QACR,IAAI,oBAAoB,OAAO,EAAE;YAC/B,MAAM,aAAa,KAAK,SAAS,CAC/B,mBAAmB,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE,EAAE,IAAI;YAE1C,IAAI,eAAe,iBAAiB,OAAO,EAAE;gBAC3C,iBAAiB,OAAO,GAAG;gBAC3B,oBAAoB,OAAO,CAAC;YAC9B;QACF;IACF,GAAG;QAAC;KAAmB;IAEvB,IAAA,kNAAS,EAAC;QACR,IAAI,iBAAiB,OAAO,EAAE;YAC5B,MAAM,aAAa,KAAK,SAAS,CAC/B,gBAAgB,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE,EAAE,IAAI;YAEvC,IAAI,eAAe,aAAa,OAAO,EAAE;gBACvC,aAAa,OAAO,GAAG;gBACvB,iBAAiB,OAAO,CAAC;YAC3B;QACF;IACF,GAAG;QAAC;KAAgB;IAEpB,MAAM,aAAa;QACjB,IAAI;YACF,WAAW;YACX,SAAS;YAET,MAAM,iBAAiB,MAAM,MAAM;YACnC,MAAM,EAAE,QAAQ,SAAS,EAAE,GAAG,MAAM,eAAe,IAAI;YAEvD,MAAM,qBAAqB,MAAM,QAAQ,GAAG,CAC1C,UAAU,GAAG,CAAC,OAAO;gBACnB,IAAI;oBACF,MAAM,mBAAmB,MAAM,MAAM,wBAAwB;wBAC3D,QAAQ;wBACR,SAAS;4BAAE,gBAAgB;wBAAmB;wBAC9C,MAAM,KAAK,SAAS,CAAC;4BAAE,UAAU,MAAM,QAAQ;wBAAC;oBAClD;oBAEA,MAAM,WAAW,MAAM,iBAAiB,IAAI;oBAE5C,iDAAiD;oBACjD,MAAM,WAAW,UAAU,UAAU,WACjC,IAAI,KAAK,SAAS,QAAQ,CAAC,QAAQ,EAAE,WAAW,KAChD;oBAEJ,OAAO;wBACL,GAAG,KAAK;wBACR,UAAU;4BACR,aAAa,SAAS,WAAW;4BACjC,UAAU,SAAS,QAAQ;4BAC3B,WAAW,SAAS,SAAS;4BAC7B;wBACF;oBACF;gBACF,EAAE,OAAO,KAAK;oBACZ,QAAQ,KAAK,CACX,CAAC,4BAA4B,EAAE,MAAM,QAAQ,CAAC,CAAC,CAAC,EAChD;oBAEF,OAAO;wBAAE,GAAG,KAAK;wBAAE,UAAU;4BAAE,aAAa;wBAAM;oBAAE;gBACtD;YACF;YAGF,UAAU;QACZ,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,yBAAyB;YACvC,SAAS;QACX,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAI,SACF,qBACE,8OAAC,+LAAG;QACF,SAAQ;QACR,gBAAe;QACf,YAAW;QACX,WAAW;kBAEX,cAAA,8OAAC,mPAAgB;;;;;;;;;;IAGvB,IAAI,OAAO,qBAAO,8OAAC,uMAAK;QAAC,UAAS;kBAAW;;;;;;IAC7C,IAAI,OAAO,MAAM,KAAK,GACpB,qBAAO,8OAAC,uMAAK;QAAC,UAAS;kBAAO;;;;;;IAEhC,MAAM,0BAA0B,OAAO,MAAM,CAC3C,CAAC,IAAM,EAAE,QAAQ,EAAE,aACnB,MAAM;IAER,qBACE,8OAAC,+LAAG;;0BACF,8OAAC,+LAAG;gBACF,SAAQ;gBACR,gBAAe;gBACf,YAAW;gBACX,IAAI;;kCAEJ,8OAAC,2NAAU;wBAAC,SAAQ;;4BAAK;4BAAgB,OAAO,MAAM;4BAAC;;;;;;;kCACvD,8OAAC,mMAAI;wBACH,OAAO,GAAG,wBAAwB,mBAAmB,CAAC;wBACtD,OAAO,0BAA0B,IAAI,YAAY;wBACjD,oBAAM,8OAAC,0KAAU;;;;;;;;;;;;;;;;0BAGrB,8OAAC,mMAAI;gBAAC,SAAS;gBAAC,SAAS;0BACtB,OAAO,GAAG,CAAC,CAAC,kBACX,8OAAC,mMAAI;wBAAC,IAAI;wBAAC,IAAI;wBAAI,IAAI;wBAAG,IAAI;wBAAG,IAAI;kCACnC,cAAA,8OAAC,mMAAI;4BACH,IAAI;gCACF,QAAQ;gCACR,YAAY;gCACZ,WAAW;oCAAE,WAAW;gCAAc;4BACxC;4BACA,SAAS,IACP,EAAE,QAAQ,EAAE,eACZ,eAAe;oCACb,IAAI,EAAE,QAAQ;oCACd,KAAK,EAAE,QAAQ,CAAC,QAAQ;oCACxB,KAAK,EAAE,QAAQ,CAAC,SAAS;oCACzB,UAAU,EAAE,QAAQ;oCACpB,KAAK,EAAE,GAAG;oCACV,UAAU,EAAE,QAAQ,CAAC,QAAQ;gCAC/B;;8CAGF,8OAAC,uNAAS;oCACR,WAAU;oCACV,QAAO;oCACP,OAAO,EAAE,GAAG;oCACZ,KAAK,EAAE,QAAQ;oCACf,IAAI;wCAAE,WAAW;oCAAQ;;;;;;8CAE3B,8OAAC,+NAAW;;sDACV,8OAAC,2NAAU;4CAAC,SAAQ;4CAAQ,MAAM;sDAC/B,EAAE,QAAQ;;;;;;wCAEZ,EAAE,QAAQ,EAAE,6BACX,8OAAC,mMAAI;4CACH,MAAK;4CACL,OAAM;4CACN,OAAM;4CACN,IAAI;gDAAE,IAAI;4CAAE;;;;;;wCAGf,EAAE,QAAQ,EAAE,0BACX,8OAAC,2NAAU;4CACT,SAAQ;4CACR,OAAM;4CACN,SAAQ;4CACR,IAAI;sDAEH,IAAI,KAAK,EAAE,QAAQ,CAAC,QAAQ,EAAE,cAAc;;;;;;;;;;;;;;;;;;uBA7CV,EAAE,QAAQ;;;;;;;;;;;;;;;;AAuDjE"}},
    {"offset": {"line": 313, "column": 0}, "map": {"version":3,"sources":["file:///Users/ray/Documents/projects/timeline-app/components/PhotoViewer.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  Dialog,\n  DialogContent,\n  DialogTitle,\n  IconButton,\n  Box,\n  Typography,\n  Chip,\n} from \"@mui/material\";\nimport { Close, LocationOn } from \"@mui/icons-material\";\n\ninterface PhotoLocation {\n  id: string;\n  lat: number;\n  lng: number;\n  filename: string;\n  url: string;\n  dateTime?: string;\n}\n\ninterface PhotoViewerProps {\n  photo: PhotoLocation | null;\n  open: boolean;\n  onClose: () => void;\n}\n\nexport default function PhotoViewer({ photo, open, onClose }: PhotoViewerProps) {\n  if (!photo) return null;\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      maxWidth=\"md\"\n      fullWidth\n      PaperProps={{\n        sx: {\n          bgcolor: \"rgba(0, 0, 0, 0.95)\",\n          color: \"white\",\n        },\n      }}\n    >\n      <DialogTitle>\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n          <Typography variant=\"h6\" sx={{ color: \"white\" }}>\n            {photo.filename}\n          </Typography>\n          <IconButton onClick={onClose} sx={{ color: \"white\" }}>\n            <Close />\n          </IconButton>\n        </Box>\n      </DialogTitle>\n      <DialogContent>\n        <Box>\n          <Box\n            sx={{\n              width: \"100%\",\n              mb: 2,\n              display: \"flex\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n              minHeight: \"400px\",\n              bgcolor: \"rgba(255, 255, 255, 0.05)\",\n              borderRadius: 2,\n              overflow: \"hidden\",\n            }}\n          >\n            <img\n              src={photo.url}\n              alt={photo.filename}\n              style={{\n                maxWidth: \"100%\",\n                maxHeight: \"70vh\",\n                objectFit: \"contain\",\n                borderRadius: 8,\n              }}\n            />\n          </Box>\n\n          <Box sx={{ mt: 2 }}>\n            {photo.dateTime && (\n              <Box mb={1.5}>\n                <Typography variant=\"body2\" sx={{ color: \"rgba(255, 255, 255, 0.7)\", mb: 0.5 }}>\n                  Date & Time\n                </Typography>\n                <Typography variant=\"body1\" sx={{ color: \"white\" }}>\n                  {new Date(photo.dateTime).toLocaleString()}\n                </Typography>\n              </Box>\n            )}\n\n            <Box mb={1.5}>\n              <Typography variant=\"body2\" sx={{ color: \"rgba(255, 255, 255, 0.7)\", mb: 0.5 }}>\n                Location\n              </Typography>\n              <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                <LocationOn sx={{ color: \"#4fc3f7\", fontSize: 20 }} />\n                <Typography variant=\"body1\" sx={{ color: \"white\" }}>\n                  {photo.lat.toFixed(6)}, {photo.lng.toFixed(6)}\n                </Typography>\n              </Box>\n            </Box>\n\n            <Box>\n              <Chip\n                label=\"GPS Tagged\"\n                icon={<LocationOn />}\n                color=\"primary\"\n                size=\"small\"\n              />\n            </Box>\n          </Box>\n        </Box>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAXA;;;;;AA4Be,SAAS,YAAY,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAoB;IAC5E,IAAI,CAAC,OAAO,OAAO;IAEnB,qBACE,8OAAC,2MAAM;QACL,MAAM;QACN,SAAS;QACT,UAAS;QACT,SAAS;QACT,YAAY;YACV,IAAI;gBACF,SAAS;gBACT,OAAO;YACT;QACF;;0BAEA,8OAAC,+NAAW;0BACV,cAAA,8OAAC,+LAAG;oBAAC,SAAQ;oBAAO,gBAAe;oBAAgB,YAAW;;sCAC5D,8OAAC,2NAAU;4BAAC,SAAQ;4BAAK,IAAI;gCAAE,OAAO;4BAAQ;sCAC3C,MAAM,QAAQ;;;;;;sCAEjB,8OAAC,2NAAU;4BAAC,SAAS;4BAAS,IAAI;gCAAE,OAAO;4BAAQ;sCACjD,cAAA,8OAAC,qKAAK;;;;;;;;;;;;;;;;;;;;;0BAIZ,8OAAC,uOAAa;0BACZ,cAAA,8OAAC,+LAAG;;sCACF,8OAAC,+LAAG;4BACF,IAAI;gCACF,OAAO;gCACP,IAAI;gCACJ,SAAS;gCACT,gBAAgB;gCAChB,YAAY;gCACZ,WAAW;gCACX,SAAS;gCACT,cAAc;gCACd,UAAU;4BACZ;sCAEA,cAAA,8OAAC;gCACC,KAAK,MAAM,GAAG;gCACd,KAAK,MAAM,QAAQ;gCACnB,OAAO;oCACL,UAAU;oCACV,WAAW;oCACX,WAAW;oCACX,cAAc;gCAChB;;;;;;;;;;;sCAIJ,8OAAC,+LAAG;4BAAC,IAAI;gCAAE,IAAI;4BAAE;;gCACd,MAAM,QAAQ,kBACb,8OAAC,+LAAG;oCAAC,IAAI;;sDACP,8OAAC,2NAAU;4CAAC,SAAQ;4CAAQ,IAAI;gDAAE,OAAO;gDAA4B,IAAI;4CAAI;sDAAG;;;;;;sDAGhF,8OAAC,2NAAU;4CAAC,SAAQ;4CAAQ,IAAI;gDAAE,OAAO;4CAAQ;sDAC9C,IAAI,KAAK,MAAM,QAAQ,EAAE,cAAc;;;;;;;;;;;;8CAK9C,8OAAC,+LAAG;oCAAC,IAAI;;sDACP,8OAAC,2NAAU;4CAAC,SAAQ;4CAAQ,IAAI;gDAAE,OAAO;gDAA4B,IAAI;4CAAI;sDAAG;;;;;;sDAGhF,8OAAC,+LAAG;4CAAC,SAAQ;4CAAO,YAAW;4CAAS,KAAK;;8DAC3C,8OAAC,0KAAU;oDAAC,IAAI;wDAAE,OAAO;wDAAW,UAAU;oDAAG;;;;;;8DACjD,8OAAC,2NAAU;oDAAC,SAAQ;oDAAQ,IAAI;wDAAE,OAAO;oDAAQ;;wDAC9C,MAAM,GAAG,CAAC,OAAO,CAAC;wDAAG;wDAAG,MAAM,GAAG,CAAC,OAAO,CAAC;;;;;;;;;;;;;;;;;;;8CAKjD,8OAAC,+LAAG;8CACF,cAAA,8OAAC,mMAAI;wCACH,OAAM;wCACN,oBAAM,8OAAC,0KAAU;;;;;wCACjB,OAAM;wCACN,MAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQrB"}},
    {"offset": {"line": 565, "column": 0}, "map": {"version":3,"sources":["file:///Users/ray/Documents/projects/timeline-app/components/PhotoTimeline.tsx"],"sourcesContent":["\"use client\";\n\nimport { Box, Typography } from \"@mui/material\";\nimport {\n  Timeline,\n  TimelineItem,\n  TimelineSeparator,\n  TimelineDot,\n  TimelineConnector,\n  TimelineContent,\n  TimelineOppositeContent,\n} from \"@mui/lab\";\n\ninterface PhotoLocation {\n  id: string;\n  lat: number;\n  lng: number;\n  filename: string;\n  url: string;\n  dateTime?: string;\n}\n\ninterface PhotoTimelineProps {\n  photos: PhotoLocation[];\n  onPhotoClick?: (photo: PhotoLocation) => void;\n}\n\nexport default function PhotoTimeline({\n  photos,\n  onPhotoClick,\n}: PhotoTimelineProps) {\n  // Filter and sort photos by date\n  const sortedPhotos = photos\n    .filter((p) => p.dateTime && !isNaN(new Date(p.dateTime).getTime()))\n    .sort(\n      (a, b) =>\n        new Date(a.dateTime!).getTime() - new Date(b.dateTime!).getTime()\n    );\n\n  if (sortedPhotos.length === 0) {\n    return (\n      <Box sx={{ p: 3, textAlign: \"center\" }}>\n        <Typography>No photos with date information to display</Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ width: \"100%\", maxHeight: \"700px\", overflowY: \"auto\" }}>\n      <Timeline position=\"right\">\n        {sortedPhotos.map((photo, index) => (\n          <TimelineItem key={photo.id}>\n            <TimelineOppositeContent sx={{ flex: 0.2, pr: 2 }}>\n              {new Date(photo.dateTime!).toLocaleDateString(\"en-US\", {\n                year: \"numeric\",\n                month: \"short\",\n                day: \"numeric\",\n              })}\n              <br />\n              {new Date(photo.dateTime!).toLocaleTimeString(\"en-US\", {\n                hour: \"2-digit\",\n                minute: \"2-digit\",\n              })}\n            </TimelineOppositeContent>\n\n            <TimelineSeparator>\n              <TimelineDot />\n              {index !== sortedPhotos.length - 1 && <TimelineConnector />}\n            </TimelineSeparator>\n\n            <TimelineContent\n              sx={{\n                cursor: onPhotoClick ? \"pointer\" : \"default\",\n              }}\n              onClick={() => onPhotoClick?.(photo)}\n            >\n              <img\n                src={photo.url}\n                alt={photo.filename}\n                style={{\n                  width: 200,\n                  maxWidth: \"100%\",\n                  borderRadius: 8,\n                  marginBottom: 4,\n                }}\n              />\n              <Typography variant=\"body2\">{photo.filename}</Typography>\n            </TimelineContent>\n          </TimelineItem>\n        ))}\n      </Timeline>\n    </Box>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;;;;AA2Be,SAAS,cAAc,EACpC,MAAM,EACN,YAAY,EACO;IACnB,iCAAiC;IACjC,MAAM,eAAe,OAClB,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,IAAI,CAAC,MAAM,IAAI,KAAK,EAAE,QAAQ,EAAE,OAAO,KAC/D,IAAI,CACH,CAAC,GAAG,IACF,IAAI,KAAK,EAAE,QAAQ,EAAG,OAAO,KAAK,IAAI,KAAK,EAAE,QAAQ,EAAG,OAAO;IAGrE,IAAI,aAAa,MAAM,KAAK,GAAG;QAC7B,qBACE,8OAAC,+LAAG;YAAC,IAAI;gBAAE,GAAG;gBAAG,WAAW;YAAS;sBACnC,cAAA,8OAAC,2NAAU;0BAAC;;;;;;;;;;;IAGlB;IAEA,qBACE,8OAAC,+LAAG;QAAC,IAAI;YAAE,OAAO;YAAQ,WAAW;YAAS,WAAW;QAAO;kBAC9D,cAAA,8OAAC,8MAAQ;YAAC,UAAS;sBAChB,aAAa,GAAG,CAAC,CAAC,OAAO,sBACxB,8OAAC,8NAAY;;sCACX,8OAAC,0QAAuB;4BAAC,IAAI;gCAAE,MAAM;gCAAK,IAAI;4BAAE;;gCAC7C,IAAI,KAAK,MAAM,QAAQ,EAAG,kBAAkB,CAAC,SAAS;oCACrD,MAAM;oCACN,OAAO;oCACP,KAAK;gCACP;8CACA,8OAAC;;;;;gCACA,IAAI,KAAK,MAAM,QAAQ,EAAG,kBAAkB,CAAC,SAAS;oCACrD,MAAM;oCACN,QAAQ;gCACV;;;;;;;sCAGF,8OAAC,kPAAiB;;8CAChB,8OAAC,0NAAW;;;;;gCACX,UAAU,aAAa,MAAM,GAAG,mBAAK,8OAAC,kPAAiB;;;;;;;;;;;sCAG1D,8OAAC,0OAAe;4BACd,IAAI;gCACF,QAAQ,eAAe,YAAY;4BACrC;4BACA,SAAS,IAAM,eAAe;;8CAE9B,8OAAC;oCACC,KAAK,MAAM,GAAG;oCACd,KAAK,MAAM,QAAQ;oCACnB,OAAO;wCACL,OAAO;wCACP,UAAU;wCACV,cAAc;wCACd,cAAc;oCAChB;;;;;;8CAEF,8OAAC,2NAAU;oCAAC,SAAQ;8CAAS,MAAM,QAAQ;;;;;;;;;;;;;mBAnC5B,MAAM,EAAE;;;;;;;;;;;;;;;AA0CrC"}},
    {"offset": {"line": 714, "column": 0}, "map": {"version":3,"sources":["file:///Users/ray/Documents/projects/timeline-app/components/WorldMap.tsx"],"sourcesContent":["\"use client\";\n\nimport Map, { Marker, Popup } from \"react-map-gl/maplibre\";\nimport \"maplibre-gl/dist/maplibre-gl.css\";\nimport { useState } from \"react\";\n\ninterface PhotoLocation {\n  id: string;\n  lat: number;\n  lng: number;\n  filename: string;\n  url: string;\n  dateTime?: string;\n}\n\nexport default function WorldMap({\n  photoLocations,\n  onMarkerClick,\n}: {\n  photoLocations: PhotoLocation[];\n  onMarkerClick: (photo: PhotoLocation) => void;\n}) {\n  const [hovered, setHovered] = useState<PhotoLocation | null>(null);\n\n  return (\n    <Map\n      initialViewState={{\n        latitude: 56.1304,\n        longitude: -106.3468,\n        zoom: 3,\n      }}\n      style={{ width: \"100%\", height: \"100%\" }}\n      mapStyle=\"https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json\"\n      // üåç KEY: allows smooth horizontal wrap\n      renderWorldCopies={true}\n      attributionControl\n    >\n      {photoLocations.map((photo) => (\n        <Marker\n          key={photo.id}\n          latitude={photo.lat}\n          longitude={photo.lng}\n          anchor=\"bottom\"\n        >\n          <div\n            style={{\n              cursor: \"pointer\",\n              fontSize: \"22px\",\n              transform: \"translateY(-4px)\",\n            }}\n            onClick={() => onMarkerClick(photo)}\n            onMouseEnter={() => setHovered(photo)}\n            onMouseLeave={() => setHovered(null)}\n          >\n            üìç\n          </div>\n        </Marker>\n      ))}\n\n      {hovered && (\n        <Popup\n          latitude={hovered.lat}\n          longitude={hovered.lng}\n          closeButton={false}\n          closeOnClick={false}\n          anchor=\"top\"\n          offset={12}\n        >\n          <strong>{hovered.filename}</strong>\n          <br />\n          {hovered.dateTime && new Date(hovered.dateTime).toLocaleDateString()}\n        </Popup>\n      )}\n    </Map>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAEA;AAJA;;;;;AAee,SAAS,SAAS,EAC/B,cAAc,EACd,aAAa,EAId;IACC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAuB;IAE7D,qBACE,8OAAC,0NAAG;QACF,kBAAkB;YAChB,UAAU;YACV,WAAW,CAAC;YACZ,MAAM;QACR;QACA,OAAO;YAAE,OAAO;YAAQ,QAAQ;QAAO;QACvC,UAAS;QACT,wCAAwC;QACxC,mBAAmB;QACnB,kBAAkB;;YAEjB,eAAe,GAAG,CAAC,CAAC,sBACnB,8OAAC,2KAAM;oBAEL,UAAU,MAAM,GAAG;oBACnB,WAAW,MAAM,GAAG;oBACpB,QAAO;8BAEP,cAAA,8OAAC;wBACC,OAAO;4BACL,QAAQ;4BACR,UAAU;4BACV,WAAW;wBACb;wBACA,SAAS,IAAM,cAAc;wBAC7B,cAAc,IAAM,WAAW;wBAC/B,cAAc,IAAM,WAAW;kCAChC;;;;;;mBAdI,MAAM,EAAE;;;;;YAoBhB,yBACC,8OAAC,0KAAK;gBACJ,UAAU,QAAQ,GAAG;gBACrB,WAAW,QAAQ,GAAG;gBACtB,aAAa;gBACb,cAAc;gBACd,QAAO;gBACP,QAAQ;;kCAER,8OAAC;kCAAQ,QAAQ,QAAQ;;;;;;kCACzB,8OAAC;;;;;oBACA,QAAQ,QAAQ,IAAI,IAAI,KAAK,QAAQ,QAAQ,EAAE,kBAAkB;;;;;;;;;;;;;AAK5E"}},
    {"offset": {"line": 807, "column": 0}, "map": {"version":3,"sources":["file:///Users/ray/Documents/projects/timeline-app/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useCallback } from \"react\";\nimport { Box, Container, Typography, Paper, Tabs, Tab } from \"@mui/material\";\nimport PhotoLibrary from \"@/components/PhotoLibrary\";\nimport PhotoViewer from \"@/components/PhotoViewer\";\nimport PhotoTimeline from \"@/components/PhotoTimeline\";\nimport WorldMap from \"@/components/WorldMap\";\n\ninterface PhotoLocation {\n  id: string;\n  lat: number;\n  lng: number;\n  filename: string;\n  url: string;\n  dateTime?: string;\n}\n\nexport default function Home() {\n  const [photoLocations, setPhotoLocations] = useState<PhotoLocation[]>([]);\n  const [photosWithDates, setPhotosWithDates] = useState<PhotoLocation[]>([]);\n  const [selectedPhoto, setSelectedPhoto] = useState<PhotoLocation | null>(\n    null\n  );\n  const [tabValue, setTabValue] = useState(0);\n\n  const handlePhotosWithLocationChange = useCallback(\n    (locations: PhotoLocation[]) => {\n      setPhotoLocations(locations);\n    },\n    []\n  );\n\n  const handlePhotosWithDatesChange = useCallback((photos: PhotoLocation[]) => {\n    setPhotosWithDates(photos);\n  }, []);\n\n  const handlePhotoClick = useCallback((photo: PhotoLocation) => {\n    setSelectedPhoto(photo);\n  }, []);\n\n  return (\n    <Container maxWidth=\"xl\" sx={{ py: 4 }}>\n      {/* Header */}\n      <Box mb={4}>\n        <Typography variant=\"h3\" component=\"h1\" gutterBottom>\n          Timeline App\n        </Typography>\n        <Typography variant=\"body1\" color=\"text.secondary\">\n          Explore your photos on an interactive globe map, timeline, and library\n        </Typography>\n      </Box>\n\n      {/* Tabs */}\n      <Paper sx={{ mb: 3 }}>\n        <Tabs\n          value={tabValue}\n          onChange={(_, newValue) => setTabValue(newValue)}\n          variant=\"fullWidth\"\n        >\n          <Tab label=\"Globe Map\" />\n          <Tab label=\"Timeline\" />\n          <Tab label=\"Photo Library\" />\n        </Tabs>\n      </Paper>\n\n      {/* Globe Map Tab */}\n      <Box sx={{ display: tabValue === 0 ? \"block\" : \"none\" }}>\n        <Paper sx={{ p: 2, mb: 3 }}>\n          <Box sx={{ height: \"600px\", width: \"100%\" }}>\n            <WorldMap\n              photoLocations={photoLocations}\n              onMarkerClick={handlePhotoClick}\n            />\n          </Box>\n        </Paper>\n      </Box>\n\n      {/* Timeline Tab */}\n      <Box sx={{ display: tabValue === 1 ? \"block\" : \"none\" }}>\n        <Paper sx={{ p: 3, maxHeight: \"700px\", overflowY: \"auto\" }}>\n          <Typography variant=\"h6\" gutterBottom>\n            Photo Timeline\n          </Typography>\n          <PhotoTimeline\n            photos={photosWithDates}\n            onPhotoClick={handlePhotoClick}\n          />\n        </Paper>\n      </Box>\n\n      {/* Photo Library Tab */}\n      <Box sx={{ display: tabValue === 2 ? \"block\" : \"none\" }}>\n        <Paper sx={{ p: 3 }}>\n          <PhotoLibrary\n            onPhotosWithLocationChange={handlePhotosWithLocationChange}\n            onPhotosWithDatesChange={handlePhotosWithDatesChange}\n            onPhotoClick={handlePhotoClick}\n          />\n        </Paper>\n      </Box>\n\n      {/* Photo Viewer Modal */}\n      <PhotoViewer\n        photo={selectedPhoto}\n        open={!!selectedPhoto}\n        onClose={() => setSelectedPhoto(null)}\n      />\n    </Container>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AAkBe,SAAS;IACtB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAkB,EAAE;IACxE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAkB,EAAE;IAC1E,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAChD;IAEF,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,MAAM,iCAAiC,IAAA,oNAAW,EAChD,CAAC;QACC,kBAAkB;IACpB,GACA,EAAE;IAGJ,MAAM,8BAA8B,IAAA,oNAAW,EAAC,CAAC;QAC/C,mBAAmB;IACrB,GAAG,EAAE;IAEL,MAAM,mBAAmB,IAAA,oNAAW,EAAC,CAAC;QACpC,iBAAiB;IACnB,GAAG,EAAE;IAEL,qBACE,8OAAC,uNAAS;QAAC,UAAS;QAAK,IAAI;YAAE,IAAI;QAAE;;0BAEnC,8OAAC,+LAAG;gBAAC,IAAI;;kCACP,8OAAC,2NAAU;wBAAC,SAAQ;wBAAK,WAAU;wBAAK,YAAY;kCAAC;;;;;;kCAGrD,8OAAC,2NAAU;wBAAC,SAAQ;wBAAQ,OAAM;kCAAiB;;;;;;;;;;;;0BAMrD,8OAAC,uMAAK;gBAAC,IAAI;oBAAE,IAAI;gBAAE;0BACjB,cAAA,8OAAC,mMAAI;oBACH,OAAO;oBACP,UAAU,CAAC,GAAG,WAAa,YAAY;oBACvC,SAAQ;;sCAER,8OAAC,+LAAG;4BAAC,OAAM;;;;;;sCACX,8OAAC,+LAAG;4BAAC,OAAM;;;;;;sCACX,8OAAC,+LAAG;4BAAC,OAAM;;;;;;;;;;;;;;;;;0BAKf,8OAAC,+LAAG;gBAAC,IAAI;oBAAE,SAAS,aAAa,IAAI,UAAU;gBAAO;0BACpD,cAAA,8OAAC,uMAAK;oBAAC,IAAI;wBAAE,GAAG;wBAAG,IAAI;oBAAE;8BACvB,cAAA,8OAAC,+LAAG;wBAAC,IAAI;4BAAE,QAAQ;4BAAS,OAAO;wBAAO;kCACxC,cAAA,8OAAC,kIAAQ;4BACP,gBAAgB;4BAChB,eAAe;;;;;;;;;;;;;;;;;;;;;0BAOvB,8OAAC,+LAAG;gBAAC,IAAI;oBAAE,SAAS,aAAa,IAAI,UAAU;gBAAO;0BACpD,cAAA,8OAAC,uMAAK;oBAAC,IAAI;wBAAE,GAAG;wBAAG,WAAW;wBAAS,WAAW;oBAAO;;sCACvD,8OAAC,2NAAU;4BAAC,SAAQ;4BAAK,YAAY;sCAAC;;;;;;sCAGtC,8OAAC,uIAAa;4BACZ,QAAQ;4BACR,cAAc;;;;;;;;;;;;;;;;;0BAMpB,8OAAC,+LAAG;gBAAC,IAAI;oBAAE,SAAS,aAAa,IAAI,UAAU;gBAAO;0BACpD,cAAA,8OAAC,uMAAK;oBAAC,IAAI;wBAAE,GAAG;oBAAE;8BAChB,cAAA,8OAAC,sIAAY;wBACX,4BAA4B;wBAC5B,yBAAyB;wBACzB,cAAc;;;;;;;;;;;;;;;;0BAMpB,8OAAC,qIAAW;gBACV,OAAO;gBACP,MAAM,CAAC,CAAC;gBACR,SAAS,IAAM,iBAAiB;;;;;;;;;;;;AAIxC"}}]
}